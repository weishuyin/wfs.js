<!DOCTYPE html>
<html>
<head>
	
	<title>h.264 To fmp4</title>  
 
</head>
<body>
    <h2>h.264 To fmp4</h2>

 
   <script type="text/javascript" src="/dist/wfs.js" ></script>  
  
   <div class="wfsjs">
   <video id="video1"  width="640" height="480" controls autoplay muted></video>
   <div class="ratio"></div>
   </div>
 
    <script>
 
	window.onload = function () {
        if (Wfs.isSupported()) {
        	
            var video1 = document.getElementById("video1");
            var wfs = new Wfs({fps:30});
            wfs.attachMedia(video1,'H264Raw');

            var websocket = new WebSocket( 'ws://' + window.location.host + '/play2');
            websocket.onopen = function(e) {
              this.binaryType = 'arraybuffer';
              this.send(JSON.stringify({t:"open", c:"ch1", v: "NA"}));
            }
            websocket.onclose = function(e) {
              console.log('Websocket Disconnected!');
            };
            websocket.onmessage = function(e) {
              wfs.receiveSocketMessage(e.data);
            }
        }
    };
    </script>
	
</body>
</html>
